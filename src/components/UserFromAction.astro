---
// Astro Actions can't be called directly in server components
// Instead, we access Astro.locals.auth() directly (what the action would do anyway)
const { userId } = Astro.locals.auth();
---

<div class="border border-purple-500 rounded p-4">
  <p class="font-semibold mb-2">⚡ Server Context</p>
  <div class="text-sm space-y-1">
    <p class="text-gray-600">
      <span class="font-mono bg-gray-100 px-1 rounded">Astro.locals.auth()</span>
    </p>
    {userId ? (
      <p class="text-green-700">
        User ID: <code class="bg-green-100 px-1 rounded font-mono">{userId}</code>
      </p>
    ) : (
      <p class="text-gray-600">Not authenticated</p>
    )}
    <p class="text-xs text-gray-500 mt-2">
      ✓ Direct access to auth context
    </p>
  </div>
</div>
